extends ../includes/dashbar
append dash-postHead
	link(rel='stylesheet' href='//cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css')
append content
	script.
		var topname = "linkHistPedidos-top";
		var sidename = "linkHistPedidos-side";
	h1.landing-head.text-center
		| #{title}
	h6.text-center Haz click en el número de tracking para copiar su enlace de rastreo
	.container.mb-5.mt-3
		table.display.table-responsive-lg.text-center#orderHistory(style='width: 100%;')
			thead
				tr
					th(scope='col') Tracking #
					th(scope='col') Nombre Pedido
					th(scope='col') Descripción
					th(scope='col') Despacho hacia
					th(scope='col') Comuna
					th(scope='col') Fecha de creación
					th(scope='col') Status
					th(scope='col') Fecha de entrega
					th(scope='col') Costo NVIO
			tbody
				each ORD, index in orders
					tr
						//- Look into changing this later down the line (https://en.wikipedia.org/wiki/Unobtrusive_JavaScript)
						th(scope='row' onclick='copyAsLink(this);copySnackbar();' id='TableHead_' + index)  #{companyId + ORD.SK.S.replace("ORDER#","")}
						td #{ORD.orderName.S}
						td #{ORD.orderDesc.S}
						td #{ORD.toAddress.M.street.S} #{ORD.toAddress.M.number.N}
						td #{ORD.toAddress.M.locality.S}
						td #{new Date(parseInt(ORD.createdAt.N)).getDate()}-#{new Date(parseInt(ORD.createdAt.N)).getMonth() + 1}-#{new Date(parseInt(ORD.createdAt.N)).getFullYear()}
						td #{ORD.status.N}
						- var notDelivered = (ORD.status.N == 0) ? true : false;
						if notDelivered
							td N/A
						else
							td #{new Date(parseInt(ORD.createdAt.N)).getDate()}-#{new Date(parseInt(ORD.createdAt.N)).getMonth() + 1}-#{new Date(parseInt(ORD.createdAt.N)).getFullYear()}
						td #{ORD.orderValue.N}
	#snackbar Enlace copiado!
append dash-viewscript
	script(src='/static/js/copy-on-click.js')
	script(src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous")
	//- Datatables scripts
	script(src='//cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js')
	script(src='//cdn.datatables.net/plug-ins/1.10.21/i18n/Spanish.json')
	//- Datatable declaration
	script(src='/static/js/declare-order-history.js')
